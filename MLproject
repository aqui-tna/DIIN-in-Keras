name: YerevaNN/DIIN-in-Keras
conda_env: conda_DIIN-in-Keras.yaml
entry_points:
  step0_data-preprocessing:
    parameters:
      p:
        type: float
        default: 32
      h:
        type: float
        default: 32
      chars_per_word:
        type: float
        default: 16
      save_dir:
        type: str
        default: data/
      dataset:
        type: str
        default: snli
      word_vec_save_path:
        type: str
        default: data/word-vectors.npy
    command: python preprocess.py --p 32 --h 32 --chars_per_word 16 --save_dir data/
      --dataset snli --word_vec_save_path data/word-vectors.npy
  step1_trainning:
    parameters:
      batch_size:
        type: float
        default: 70
      eval_interval:
        type: float
        default: 500
      char_embed_size:
        type: float
        default: 8
      char_conv_filters:
        type: float
        default: 100
      char_conv_kernel:
        type: float
        default: 5
      dropout_initial_keep_rate:
        type: float
        default: 1.0
      dropout_decay_rate:
        type: float
        default: 0.977
      dropout_decay_interval:
        type: float
        default: 10000
      l2_full_step:
        type: float
        default: 100000
      l2_full_ratio:
        type: float
        default: 9.0e-05
      l2_diference_penalty:
        type: float
        default: 0.001
      first_scale_down_ratio:
        type: float
        default: 0.3
      transition_scale_down_ratio:
        type: float
        default: 0.5
      growth_rate:
        type: float
        default: 20
      layers_per_dense_block:
        type: float
        default: 8
      dense_blocks:
        type: float
        default: 3
      labels:
        type: float
        default: 3
      load_dir:
        type: str
        default: data
      models_dir:
        type: str
        default: models/
      logdir:
        type: str
        default: logs
      word_vec_path:
        type: str
        default: data/word-vectors.npy
    command: python train.py --batch_size 70 --eval_interval 500 --train_word_embeddings
      --char_embed_size 8 --char_conv_filters 100 --char_conv_kernel 5 --dropout_initial_keep_rate
      1. --dropout_decay_rate 0.977 --dropout_decay_interval 10000 --first_scale_down_ratio
      0.3 --transition_scale_down_ratio 0.5 --growth_rate 20 --layers_per_dense_block
      8 --dense_blocks 3 --labels 3 --load_dir ./data --models_dir ./models/ --logdir
      ./logs --word_vec_path ./data/word-vectors.npy
  main:
    command: python ex_mlflow_multistep_main.py
